# *第一章*:初学安卓和 Java

欢迎来到*安卓编程初学者第三版*。在第一章中，我们不会浪费任何时间开始开发安卓应用。我们将看看安卓有什么了不起的，安卓和 Java 到底是什么，它们是如何工作和相互补充的，这对我们作为未来的开发人员意味着什么。快速前进，我们将设置所需的软件，这样我们就可以构建和部署一个简单的第一个应用程序。

注意

我的目标是使这本书跟上时代。请查看以下网页，了解自该书首次印刷以来对安卓工作室进行的任何更改的讨论和提示:[http://gamecode school . com/books/Android-初学者编程-第三版#安卓工作室-更新](http://gamecodeschool.com/books/android-programming-for-beginners-3rd-edition#android-studio-updates)。

到本章结束时，我们将完成以下工作:

*   发现了第三版的新内容
*   了解了 Java 和安卓如何协同工作
*   设置我们的开发环境——安卓工作室——它负责构建安卓应用程序所涉及的所有组件，我们接下来将了解这些组件
*   了解了 **Java 开发工具包**(**【JDK】**)和安卓**应用编程接口** ( **API** )以及我们如何通过安卓工作室使用它们
*   打造了我们第一款安卓应用
*   在安卓模拟器上部署了该应用
*   在安卓模拟器和真实设备上运行我们的应用

要经历的事情太多了，让我们开始吧。

# 技术要求

以下是使用 Android Studio 及其相关工具进行 Android 开发的官方技术要求。然而，这些是绝对的最低限度。详情请参见*设置安卓工作室*部分。

对窗口的要求如下:

*   微软视窗 7/8/10 (64 位)
*   至少 4 GB 内存；建议使用 8 GB 内存
*   2 GB 的可用磁盘空间作为最小值；推荐 4gb(500 MB 用于**集成开发环境** ( **IDE** ) + 1.5 GB 用于安卓**软件开发工具包** ( **SDK** )和仿真器系统映像)
*   最小屏幕分辨率为 1，280 x 800

对 Mac 的要求如下:

*   Mac OS X 10.10(约塞米蒂)或更高，最高可达 10.14 (macOS Mojave)
*   至少 4 GB 内存；建议使用 8 GB 内存
*   至少有 2 GB 的可用磁盘空间；推荐 4gb(IDE 为 500 MB，安卓软件开发工具包和仿真器系统映像为 1.5 GB)
*   最小屏幕分辨率为 1，280 x 800

对 Linux 的要求如下:

*   GNOME 或 KDE 桌面
*   在基于 Debian 的 gLinux 上测试
*   能够运行 32 位应用程序的 64 位分布
*   GNU C 库(glibc) 2.19 或更高版本
*   至少 4 GB 内存；建议使用 8 GB 内存
*   至少有 2 GB 的可用磁盘空间；推荐 4gb(IDE 为 500 MB，安卓软件开发工具包和仿真器系统映像为 1.5 GB)
*   最小屏幕分辨率为 1，280 x 800

你可以在[https://GitHub . com/PacktPublishing/Android-初学者编程-第三版/tree/main/章节%2001](https://github.com/PacktPublishing/Android-Programming-for-Beginners-Third-Edition/tree/main/chapter%2001) 找到本章中出现的代码文件。

# 第三版有什么新内容？

与第一版相比，第二版增加了大量的主题。不幸的是，平装书只能装这么多页。因此，本版着重于改进 Java、Android 和 app 开发概念的讲授方式。我们重新思考了主题的解释方式，使其比以前更加直观。此外，我还设法挤进了大约十几个新的迷你话题。这些要么是早期版本中没有涉及的 Java 基础，如变量类型，新的安卓工作室功能，如分析器，要么是经典的编程概念，如方法递归和我们代码的实时调试。希望第三版能让你的安卓和 Java 之旅更加顺畅和完整。

# 为什么是 Java 和 Android？

当安卓在 2008 年首次出现时，与苹果 iPhone/iPad 上更时尚的 iOS 相比，它有点单调。但是很快，通过各种各样的手机产品引起了注重实用价格、注重时尚和精通技术的人的共鸣，安卓用户数量激增。

对包括我在内的许多人来说，为安卓系统开发是最有益的消遣和商业活动。

快速构建一个想法的原型，提炼它，然后决定运行它，并将其连接成一个成熟的应用程序，这是一个令人兴奋和有益的过程。任何编程都可能很有趣，我一生都在编程，但为安卓系统创作不知何故是非常值得的。

确切地解释为什么会这样是相当困难的。或许是平台免费开源的事实。你可以分发你的应用程序，而不需要一家大型控股公司的许可——没有人能阻止你。与此同时，你拥有完善的、企业控制的大众市场，比如亚马逊 Appstore 和谷歌 Play。

更有可能的是，为安卓开发之所以给人如此好的感觉，是因为设备本身的性质。他们是非常私人的。你可以开发与人们生活互动的应用——教育、娱乐、讲故事等等——它就在他们的口袋里，随时可以带走，无论是在家里、工作场所还是度假。

您当然可以为桌面构建更大的东西。但是，知道成千上万(或数百万)的人把你的作品放在口袋里，并与朋友分享，这不仅仅是一种兴奋。

事实上，为安卓开发被认为是高度熟练的，最成功的开发人员受到极大的钦佩，甚至崇敬。

如果所有这些蓬松和精神的东西对你来说没有任何意义，那也没关系；为安卓系统开发可以让你谋生，甚至让你变得富有。随着设备保有量的持续增长，CPU 和 GPU 能力的持续提升，以及安卓操作系统本身的不停进化，对专业应用开发者的需求只会越来越大。

简而言之，最好的安卓开发者——更重要的是，拥有最好想法和最大决心的安卓开发者——比以往任何时候都更受欢迎。没有人知道这些未来的安卓应用开发者是谁，他们甚至可能还没有写好他们的第一行 Java。

那么，为什么不是每个人都是安卓开发者呢？显然，并不是每个人都会分享我的热情，因为创造软件可以帮助人们让他们的生活变得更好，但我猜测，因为你正在阅读这篇文章，你可能会！

# 初学者的第一块绊脚石

不幸的是，对于那些和我一样热情的人来说，在前进的道路上有一种玻璃墙，让许多有抱负的安卓开发者感到沮丧。

安卓用 Java 做应用。每一本安卓书籍，甚至是那些针对所谓初学者的书籍，都假设读者至少有中级的 Java 知识，大多数需要高级水平。所以，优秀到优秀的 Java 知识*是*学习 Android 的前提。

不幸的是，在与安卓完全不同的环境中学习 Java 有时会有点枯燥，而且你所学的大部分内容都不能直接转移到安卓世界。你可以看到为什么安卓和 Java 的初学者经常从一开始就被推迟。

但不需要这样。在这本书里，我小心翼翼地把所有你会学到的 Java 主题放在一本厚重的 Java 入门书里，并把它们重新制作成四个多章节的应用程序和十几个快速迷你应用程序，从一个简单的备忘录应用程序开始，然后发展成一个很酷的绘图应用程序、一个数据库应用程序和一个可玩的游戏(在线提供)。

如果你想成为一名专业的安卓开发者，或者只是想在学习 Java 和安卓时有更多的乐趣，这本书会有所帮助。

# 【Java 和安卓如何协同工作

在我们开始安卓探索之前，我们需要了解安卓和 Java 是如何协同工作的。安卓是一个复杂的系统，但你不需要深入了解它就能做出惊人的应用。

在我们用 Java 为 Android 编写了一个程序之后，我们点击一个按钮，我们的代码就被转换成了另一种形式，安卓可以理解的形式。这个的另一种形式叫做**字节码**，转换过程叫做编辑**编译**。

然后，当用户安装我们的应用程序时，字节码被称为**安卓运行时** ( **ART** )的另一个进程翻译成机器代码。这是最快的执行格式。所以，如果你曾经听到人们说你不应该使用 Java，因为它很慢，那么你知道他们错了。对于程序员来说，Java 编程速度很快，然后在安装时，被更改为对设备来说很快的机器代码。还有什么更好的？

ART 不仅能够超快速地执行我们的应用程序，而且还能降低电池使用量。此外，ART 系统不仅仅是创建机器代码，然后坐下来放松；它为我们的应用程序提供挂钩，在应用程序运行时增强内存管理。这使得我们的应用程序运行得更高效，正如我们将在 [*第 12 章*](12.html#_idTextAnchor218)*中看到的，堆栈、堆和垃圾收集器*通过处理内存管理的关键方面更容易编写。

ART 本身是一个用另一种语言编写的软件系统，运行在 Linux 操作系统的特殊改编版本上。因此，用户看到的安卓本身只是一个运行在另一个操作系统上的应用程序。

安卓是一个子系统的集合。典型的安卓用户看不到 Linux 操作系统，也不知道 ART 的存在，但他们都在那里让事情运转起来。

系统 Linux 部分的目的是隐藏安卓运行的硬件和软件的复杂性和多样性，但同时暴露其所有有用的功能。这种特性的展示有两种方式:

*   首先，系统本身必须能够访问硬件，它确实可以。
*   其次，这种访问方式必须对程序员友好且易于使用——这是因为安卓**应用编程接口**。

让我们继续更多地谈论安卓应用编程接口。

注意

这本书是关于从零开始学习 Java 和构建安卓应用程序的，所以我不会对安卓的工作方式进行更深入的研究。然而，如果你想知道更多，那么维基百科页面是一个很好的参考:[https://en . Wikipedia . org/wiki/Android _(operating _ system](https://en.wikipedia.org/wiki/Android_(operating_system))。

## 了解安卓 API

安卓应用编程接口是使做特殊事情变得容易的代码。可以用一台机器，也许是一辆汽车，来做一个简单的类比。当你踩下油门时，引擎盖下会发生一大堆事情。我们不需要理解燃烧或燃油泵，因为一些聪明的工程师已经为我们制作了一个**界面**，在这种情况下，是一个机械界面:加速踏板。

例如，以下一行 Java 代码在本书的这个阶段可能看起来有点吓人，但它是安卓应用编程接口如何帮助我们的一个很好的例子:

```
locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER)
```

一旦你了解到这一行代码在太空中搜索可用的卫星，然后在它们围绕地球的轨道上与它们通信，然后检索你在行星表面的精确纬度和经度，就很容易开始结合编译的字节码和 ART 瞥见安卓应用编程接口的力量和深度。

当然，这段代码看起来确实有点挑战性——在本书的这个阶段甚至令人难以置信——但是想象一下，尝试以其他方式与卫星通话！

安卓应用编程接口有一大堆已经为我们编写好的 Java 代码，可以随心所欲地使用。

注意

对进入安卓系统的代码行数有许多不同的估计。有的估计低至 100 万，有的则高达 2000 万。可能令人惊讶的是，尽管有如此大量的代码，安卓在编程界却以“轻量级”著称

我们必须问的问题和本书试图回答的问题如下:

我们如何使用这些代码来做很酷的事情？或者把这个问题框起来，以适应早期的类比，我们如何找到和操作安卓应用编程接口的踏板、方向盘和天窗？

这个问题的答案是 Java 编程语言，以及 Java 是为了帮助程序员处理复杂性而设计的这一事实。让我们来谈谈 Java 和**面向对象编程** ( **OOP** )。

## Java 是面向对象的

Java 是一种编程语言，比安卓存在的时间要长得多。这是一种面向对象的语言。这意味着它使用了可重用编程对象的概念。如果这个听起来像技术术语，另一个类比会有帮助。Java 让我们和其他人(比如安卓开发团队)能够编写出可以基于现实世界事物进行结构化的 Java 代码，这里有一个重要的部分:它可以被**重用**。

所以，用汽车的类比，我们可以问这样一个问题:如果一个制造商一天生产多辆汽车，他们会为每辆汽车重新设计每个零件吗？

答案当然是否定的。他们让高技能的工程师开发出完全正确的组件，经过多年的磨砺、提炼和改进。然后，同一个组件被一次又一次地重用，并且偶尔被改进。

如果你对我的类比很挑剔，那么你可以指出，汽车的每个部件仍然必须使用现实生活中的工程师或机器人等原材料制造。

这是真的。软件工程师在编写代码时所做的就是为一个对象构建一个蓝图。然后，我们使用 Java 代码从他们的蓝图中创建一个对象，一旦我们有了这个对象，我们就可以配置它、使用它、将它与其他对象结合，等等。

此外，除此之外，我们还可以自己设计蓝图，并利用蓝图制作物品。然后，编译器将我们定制的创建转换(制造)成字节码。嘿，很快！我们有一个安卓应用。

在 Java 中，蓝图被称为**类**。当一个类转化为一个真正的工作“事物”时，我们称之为类的一个**对象**或**实例**。

简明的物体

我们可以整天继续做类比。然而，在这一点上，我们只关心以下几点。

Java 是一种语言，允许我们编写一次代码，然后可以重复使用。这非常有用，因为它节省了我们的时间，并允许我们使用他人的代码来执行我们可能没有时间或知识来编写自己的任务。很多时候，我们甚至不需要看到这段代码，甚至不需要知道它是如何工作的！最后一个类比:我们只需要知道如何使用代码，就像我们需要学习如何驾驶汽车一样。

因此，安卓总部的一些聪明的软件工程师编写了一个极其复杂的 Java 程序，可以和卫星对话。然后，他们考虑如何让这些代码对所有想要制作神奇应用程序的安卓程序员有用，这些应用程序利用用户的位置来做很酷的事情。他们将做的事情之一是使获取设备在世界上的位置等功能成为一项简单的单线任务。

所以，我们之前看到的那一行代码会让更多我们看不到、也不需要看到的代码生效。这是一个使用别人的代码使我们的代码变得无限简单的例子。

注意

如果你不必看到所有代码的事实让你失望，那么我理解你的感受。我们中的一些人，当我们了解一些事情时，想要了解每一个错综复杂的细节。如果你是这样的，那么请放心，开始学习安卓应用编程接口如何在内部工作的最好地方是按照应用编程接口程序员的意图使用它。在整本书中，我将定期指出进一步学习的机会，在那里您可以了解安卓应用编程接口的内部工作原理。此外，我们将编写本身可重用的类，有点像我们自己的应用编程接口，只是我们的类将专注于我们希望我们的应用程序做什么。

欢迎来到**面向对象编程**–**OOP**的世界。我会在每一章中不断提到面向对象编程，在 [*第 10 章*](10.html#_idTextAnchor187)*O面向对象编程*中会有它如何工作的大揭示。

## 再说一遍——安卓到底是什么？

为了在安卓上完成事情，我们编写了自己的 Java 代码，它也使用了安卓 API 的 Java 代码。然后，这些代码被编译成字节码，并在用户安装时由 ART 翻译成机器代码，机器代码又连接到一个名为 Linux 的底层操作系统，该操作系统处理复杂且极其多样化的硬件，这些硬件是不同的安卓设备。

安卓设备的制造商和单个硬件组件显然也知道这一点，他们编写了名为**驱动程序**的高级软件，确保的硬件(中央处理器、图形处理器、全球定位系统接收器、存储芯片、硬件接口等)可以在底层的 Linux 操作系统上运行。

字节码(以及其他一些资源)被放在一个名为**安卓应用包** ( **APK** )和的文件包中，这是 ART 为用户准备我们的应用程序所需要运行的。

注意

不需要记住我们的代码与硬件交互时所经历的步骤的细节。只要理解我们的 Java 代码经过一些自动化过程，成为我们将发布到谷歌 Play 商店的应用程序就足够了。

下一个问题是“所有这些 Java 编码和编译成字节码以及 APK 打包到底发生在哪里？”。让我们看看我们将使用的开发环境。

## Android 工作室

A **开发环境**是一个术语，指的是拥有所有你需要开发、设置并准备好去的地方。我们需要两件事来开始:

*   我们谈到了将我们的 Java 代码以及其他人的 Java 代码编译成字节码，这些字节码又会在用户的安卓设备上转换成可执行的机器代码。要使用 Java 代码，我们需要一些叫做 JDK T2 的自由软件。JDK 包含了更多其他人的代码，这些代码是独立于安卓应用编程接口的。
*   安卓需要开发一整套工具，当然我们也需要安卓应用编程接口。这一整套需求被统称为安卓软件开发工具包 T2。幸运的是，下载和安装一个应用程序就可以把这些东西捆绑在一起。应用叫做**安卓工作室**。

安卓工作室是一个集成开发环境，它将处理编译我们代码的所有复杂性，并将 T2 与 JDK 和安卓应用编程接口联系起来。一旦我们安装了安卓工作室，我们就可以在这个单一的应用程序中做我们需要的一切，并把我们一直在讨论的许多复杂性抛在脑后。

小费

随着时间的推移，这些复杂性将成为第二天性。没有必要掌握它们才能取得进一步的进步。

所以，我们最好动手操作安卓工作室。

# 设置安卓工作室

设置安卓工作室非常简单，虽然有点冗长。拿些点心开始下面的步骤。本教程将安装安卓工作室到 D 驱动器。我选择 D 驱动器是因为它是一个大的安装，一旦我们下载了所有的东西，大约 12 GB，许多电脑上的 D 驱动器通常比 C 驱动器更大，有更多的可用空间。如果您希望安装在 c 盘(或任何其他盘)上，那么这些说明应该很容易调整:

1.  访问[https://developer.android.com/studio](https://developer.android.com/studio)点击**下载安卓工作室**按钮。这将开始下载最新的 Windows 稳定版本。您需要接受条款和条件才能开始下载。
2.  While you are waiting for the download to complete, create a new folder on the root of your D drive called `Android`. Inside the `Android` folder, create another new folder called `Android Studio`. Navigate back to the `Android` folder and create another new folder named `Projects`. This is where we will keep all the project files we will create throughout the book. Create another new folder called `Sdk`, which is where we will ask the installer program to install the Android SDK. You should now have a `D:\Android` folder that looks like this:

    ![Figure 1.1 – D:\Android folder ](image/Figure_1.01_B16773.jpg)

    图 1.1–D:\安卓文件夹

3.  下载完成后，找到下载的文件。它将被称为`android-studio-ide....`。双击文件运行它。
4.  You will be asked to grant the installer program administrative privileges, then you can left-click **Next** to begin the installation. On the **Choose Components** screen, make sure that both the **Android Studio** and **Android Virtual Device** options are checked, and then left-click the **Next** button:

    ![Figure 1.2 – Choose Components screen ](image/Figure_1.02_B16773.jpg)

    图 1.2–选择组件屏幕

5.  On the **Configuration Settings** window, left-click the **Browse** button and navigate to `D:\Android\Android Studio`, and then left-click the **OK** button:

    ![Figure 1.3 – Configuration Settings window](image/Figure_1.03_B16773.jpg)

    图 1.3–配置设置窗口

6.  左击上图所示的**下一步**按钮。在**选择开始菜单文件夹**窗口，左键单击**安装**接受默认选项。安装的第一部分现在将继续。
7.  Once you get the **Installation Complete** message, left-click the **Next** button. You can then left-click the **Finish** button.

    安卓工作室应该会自动启动。如果没有，您可以从 Windows 开始菜单中找到并启动 Android Studio 应用程序。

8.  系统会提示你少了一个 SDK(除非这不是你第一次使用安卓 Studio)。左键单击**下一步**继续。
9.  On the **SDK Components Setup** screen shown next, we want to change the install location. Left-click the **Android SDK Location** field and browse to `D:\Android\Sdk`, as shown in the following screenshot:

    ![Figure 1.4 – SDK Components Setup screen ](image/Figure_1.04_B16773.jpg)

    图 1.4–软件开发工具包组件设置屏幕

10.  左键单击**下一步**按钮。
11.  在**验证设置**窗口中，左键单击**完成**按钮。安卓工作室现在将下载更多文件并完成安装。这可能需要几分钟或更长时间，您可能会再次被提示允许访问您的电脑。
12.  过程结束后，左键点击**完成**按钮。

您将看到安卓工作室欢迎屏幕，如下所示:

![Figure 1.5 – Android Studio welcome screen ](image/Figure_1.05_B16773.jpg)

图 1.5–安卓工作室欢迎屏幕

如果你是继续下一部分，那么离开这个屏幕。如果你愿意，你可以关闭它，从窗口开始菜单运行安卓工作室，就像任何其他应用一样，当你准备好继续的时候。

让我们谈谈安卓应用程序包含的所有不同的东西。

# 安卓应用是由什么构成的？

我们已经知道，我们将编写本身会使用别人的 Java 代码的 Java 代码，将被编译成字节码，在我们用户的 Android 设备上转换成机器码。除此之外，我们还将添加和编辑最终 APK 中包含的其他文件。这些文件被称为**安卓资源**。

## 安卓资源

我们的应用程序将包括资源，如图像、声音和**用户界面** ( **用户界面**)布局，这些资源与 Java 代码保存在不同的文件中。在这本书的过程中，我们将慢慢地向他们介绍我们自己。

它还将包括包含我们应用程序文本内容的文件。惯例是通过单独的文件引用我们应用程序中的文本，因为这使得它们易于更改，并且易于创建适用于不同语言和地理区域的应用程序。

此外，我们应用程序的实际用户界面布局，尽管可以选择用视觉设计器来实现，实际上是由安卓从基于文本的文件中读取的。

安卓(或任何计算机)当然不能像人类一样阅读和识别文本。因此，我们必须以高度组织和预定义的方式展示我们的资源。为此，我们将使用**可扩展标记语言** ( **XML** )。XML 是一个巨大的话题，但幸运的是，它的全部目的是使人和机器都可读。我们不需要学习这种语言；我们只需要注意(然后遵守)一些规则。此外，在我们与 XML 交互的大部分时间里，我们都是通过安卓工作室提供的简洁的可视化编辑器来实现的。我们可以知道什么时候我们在处理一个 XML 资源，因为文件名将以扩展名`.xml`结束。

你不需要记住这一点，因为我们会在整本书中不断地回到这个概念。

# 安卓的 Java 代码的结构

除了这些资源，值得注意的是，Android 中使用的 Java，其代码有一个结构。我们可以利用数百万行代码。这段代码显然需要以一种易于查找和引用的方式进行组织。它被组织成专门针对安卓的**包**。

## 包装

每当我们创建一个新的安卓应用程序时，我们将选择一个独特的名称，称为**包**。我们将在*构建我们的第一个安卓应用程序*部分看到如何做到这一点。包装经常被分成**子包装**，所以它们可以和其他类似的包装组合在一起。我们可以简单地把它看作文件夹和子文件夹，这几乎就是它的本来面目。

我们可以将安卓应用编程接口提供给我们的所有包视为代码库中的代码。我们将使用的一些常见安卓软件包包括:

*   `android.graphics`
*   `android.database`
*   `android.view.animation`

正如你所看到的，它们被排列和命名是为了让它们里面的东西尽可能的明显。

注意

如果你想了解安卓应用编程接口的深度和广度，那么看看安卓包索引:[https://developer.android.com/reference/packages](https://developer.android.com/reference/packages)。

## 类

早些时候，我们了解到我们可以转换成对象的可重用代码蓝图被称为**类**。类包含在这些包中。我们将在我们的第一个应用程序中看到如何轻松地**导入其他人的包以及这些包中的特定类，以便在我们的项目中使用。一个类几乎总是包含在与该类同名的文件中，并且它还会有`.java`文件扩展名。**

## 方法

在 Java(因此也是安卓)中，我们进一步将类分成执行类的不同动作的部分。我们称这些面向行动的部分**方法**。最常见的是，我们将使用类的方法来访问数百万行代码中提供的功能。

我们不需要阅读代码。我们只需要知道哪个类有我们需要的东西，它在哪个包中，以及类中的哪些方法能准确地给出我们想要的结果。

下图显示了安卓应用编程接口的表示。我们将要编写的代码的结构将类似于这个例子的结构，尽管我们通常每个应用程序只有一个包。

当然，由于 Java 的面向对象特性，我们将只使用从这个 API 中选择的部分。还要注意，每个类都有自己独特的数据。通常，如果您想要访问类中的数据，您需要拥有该类的对象:

![Figure 1.6 – A representation of the Android API ](image/Figure_1.06_B16773.jpg)

图 1.6–安卓应用编程接口的表示

你不需要记住这一点，因为我们会在整本书中不断地回到这个概念。

到本章结束时，我们将导入多个包，以及来自它们的几十个类，我们也将使用它们的许多方法。到第二章 *【第一次接触:Java、XML 和用户界面设计器*结束时，我们甚至已经编写了自己的方法。现在我们可以开始使用第一个应用程序了。

# 打造我们的第一款安卓应用

在编程中，新生的第一个应用程序使用他们正在使用的任何语言/操作系统向世界问好是一种传统。我们将快速构建一个这样做的应用程序，在 [*第二章*](02.html#_idTextAnchor043) *、第一联系人:Java、XML 和 UI 设计器*中，我们将进一步添加一些按钮，当用户按下这些按钮时，它们会做出响应。

注意

本章末尾的完整代码位于 [*第 1 章*](#_idTextAnchor014) 文件夹的下载包中，供您参考。但是，您不能简单地复制和粘贴这些代码！你仍然需要经历本章中解释的项目创建阶段(以及所有项目的开始)，因为安卓工作室在幕后做了很多工作。一旦您熟悉了这些步骤，并理解了哪些代码是由您程序员键入的，哪些代码/文件是由 Android Studio 生成的，那么您将能够通过复制和粘贴我在下载包中提供的文件来节省时间和键入。

按照以下步骤启动项目:

1.  Run Android Studio in the same way you run any other app. On Windows 10, for example, the launch icon appears in the start menu.

    小费

    如果系统提示您从… 导入工作室设置，请选择**不导入设置**。

2.  You will be greeted with the Android Studio welcome screen, as shown in the following screenshot. Locate the start a new Android Studio project option and left-click it:

    ![Figure 1.7 – Android Studio welcome screen ](image/Figure_1.07_B16773.jpg)

    图 1.7–安卓工作室欢迎屏幕

3.  The window that follows is **Select a Project Template**.

    这些是一些有用的项目模板，安卓工作室可以根据你要开发的应用类型为你生成。我们将使用**基本活动**选项。安卓工作室将自动生成少量代码和精选资源来启动我们的项目。我们将在下一章详细讨论代码和资源。

4.  Select **Basic Activity**. Here is a picture of the **Select a Project Template** window with the **Basic Activity** option selected:

    ![Figure 1.8 – Select a Project Template window ](image/Figure_1.08_B16773.jpg)

    图 1.8–选择项目模板窗口

5.  确保**基本活动**如上一张截图一样被选中，然后点击**下一步**。
6.  After this, Android Studio will bring up the **Configure Your Project** window. This is where we will do the following:

    a.命名新项目。

    b.选择项目文件应该放在计算机的什么位置。

    c.提供一个包名来区分我们的项目和其他项目，以防我们决定在游戏商店发布应用程序。

    d.选择我们将使用的编程语言。

    我们项目的名称是`Hello World`，文件的位置是我们在*设置安卓工作室*部分创建的`Projects`文件夹。

    包名几乎可以是你喜欢的任何东西。如果你有一个网站，你可以使用`com.yourdomainname`格式。如果没有，可以随便用我的域名，`com.gamecodeschool.helloworld`，或者你自己随便编的东西。只有来发表的时候才重要。

    说清楚，万一你看不清楚下面截图的细节，这里是我用的数值。请记住，根据您对包名称和项目位置的选择，您的可能会有所不同:

    ![](image/Figure_1.Table_1_B16773.jpg)

    小费

    请注意，应用程序名称在`Hello`和`World`之间有一个空格，但是项目位置没有，如果有也不会起作用。

7.  The next screenshot shows the **Configure Your Project** screen once you have entered all the information:

    ![Figure 1.9 – Configure Your Project screen ](image/Figure_1.09_B16773.jpg)

    图 1.9–配置您的项目屏幕

8.  In the previous screenshot, you can see that Android Studio has auto-generated a package name based on the information entered. Mine is **com.gamecodeschool.helloworld**. Yours might be the same or not; it doesn't matter.

    注意

    你可以用几种不同的语言编写安卓应用，包括 C++和 Kotlin。与使用 Java 相比，两者各有优缺点。学习 Java 将是对其他语言的很好的介绍，Java 也是 Android 的官方语言。Play Store 上的大多数顶级应用和游戏目前都是用 Java 编写的。

    还可以看到**最小 SDK** 选项。将它保留为默认值，但请注意，在编写时，默认值可能会有所不同。

    注意

    我们已经知道，安卓软件开发工具包是我们将用来开发应用程序的代码包的集合。像任何好的软件开发工具包一样，安卓软件开发工具包会定期更新，每次有重大更新时，版本号都会增加。简单来说，版本号越高，你能使用的功能就越新；版本号越低，我们的应用程序运行的设备就越多。就目前而言，安卓果冻豆将为我们提供许多出色的功能，并与当前使用的安卓设备几乎 100%兼容。如果在阅读的时候安卓工作室建议更新的应用编程接口和安卓版本，那就去吧。

    如果你在未来几年阅读这本书，那么**最小 SDK** 选项可能会默认为不同的东西，但是这本书里的代码仍然有效。

9.  Click the **Finish** button and we will run the app to see what we have achieved.

    注意

    第一次创建新项目时，安卓工作室会启动另一次下载。安卓工作室将建立 Gradle 构建系统，用于管理项目配置和部署。这只会发生在第一个项目。这本书不需要 Gradle 的知识，但是如果你好奇的话，一个简单的网络搜索会揭示更多。

让我们看看我们的应用程序在行动。

# 部署应用程序到目前为止

在我们探索任何代码并学习第一点 Java 之前，您可能会惊讶地发现我们已经可以运行我们的项目了。这将只是一个相当没有特色的应用程序，但由于我们将尽可能频繁地运行该应用程序来检查我们的进度，让我们看看现在如何做。你有三个选择:

*   在调试模式下，在您的电脑(安卓工作室的一部分)上的模拟器上运行该应用程序。
*   在真实的安卓设备上以 USB 调试模式运行该应用。
*   将应用导出为完整的安卓项目，可以上传到游戏商店。

第一个选项(调试模式)是最容易设置的，因为我们是在设置安卓工作室时设置的。如果你有一台功能强大的 PC，你几乎不会注意到仿真器和真实设备的区别。然而，屏幕触摸是通过鼠标点击来模拟的，在我们将创建的一些后续应用程序中，如绘图应用程序中，对用户体验的适当测试是不可能的。此外，你可能只是喜欢偶尔在一个真实的设备上测试你的作品——我知道我喜欢。

第二个选项，使用真实的设备，有几个步骤，但一旦设置好，就像选项 1 一样好，屏幕触摸是真实的。

最后一个选项需要大约 5 分钟(至少)来准备，然后您需要手动将创建的包放在真实的设备上，并在每次更改代码时安装它。

也许最好的方法是使用模拟器快速测试和调试代码中的小增量，然后在真实设备上相当有规律地使用 USB 调试模式，以确保事情仍然如预期的那样。您只是偶尔想要导出一个实际的可部署包。

出于这些原因，我们现在将介绍如何在真实设备上使用仿真器和 USB 调试来运行应用程序。

## 在安卓模拟器上运行和调试应用

按照以下简单步骤在默认安卓模拟器上运行应用程序:

1.  From the Android Studio menu bar, select **Tools** | **AVD Manager**. **AVD** stands for **Android Virtual Device** (an emulator). You will see the following window:

    ![Figure 1.10 – AVD Manager ](image/Figure_1.10_B16773.jpg)

    图 1.10–自动车辆识别管理器

    请注意，列表中有一个模拟器。我的情况是 **Pixel_3a_API_30_x。**如果你在未来的某个时候关注这个，可能是默认安装了一个不同的仿真器。没关系。

    重要说明

    模拟器应该已经按照我们之前执行的步骤安装好了。在用一个预发布版本进行测试时，我注意到默认情况下没有安装它。如果在**您的虚拟设备**屏幕上没有列出仿真器，选择**工具** | **AVD 管理器** | **创建虚拟设备…** | **下一步** | **R 下载** | **接受** | **下一步**将下载并安装默认仿真器。安装完成后，点击**完成**，然后点击**下一步**，最后再次点击**完成**。现在，您可以参考上一步来运行模拟器。

2.  Click the green play icon (to the right) shown in the next screenshot and wait as the emulator boots up:

    ![Figure 1.11 – Play icon ](image/Figure_1.11_B16773.jpg)

    图 1.11–播放图标

3.  现在你可以点击安卓工作室快速启动栏上的播放图标，如下图所示，如果出现提示，选择**Pixel _ 3a _ API _ 30 _ x……**(或者不管你的模拟器叫什么)，应用就会在模拟器上启动:

![Figure 1.12 – Play icon on the Android Studio quick launch bar ](image/Figure_1.12_B16773.jpg)

图 1.12–安卓工作室快速启动栏上的播放图标

你完蛋了。以下是目前为止该应用在模拟器中的样子。请记住，您可能(确实)有一个不同的仿真器，这很好:

![Figure 1.13 – What the app looks like so far ](image/Figure_1.13_B16773.jpg)

图 1.13–到目前为止，该应用程序是什么样子的

显然，在我们搬到硅谷并寻求 T2 的资金支持之前，我们还有更多工作要做，但这是一个良好的开端。屏幕上的信息是**你好第一片段**。一个**片段**是很多安卓应用的一个构建模块，我们将在整本书中进一步探索它们。点击**下一步**按钮，会看到一个新的空布局，然后点击**上一步**按钮，会再次看到 **Hello first fragment** 画面。考虑到我们还没有写任何代码，这还不错。

我们需要在整个开发过程中经常测试和调试我们的应用程序，以检查任何错误、崩溃或任何其他意外情况。

注意

我们将在下一章看到如何从我们的应用程序中获得错误和其他调试反馈。

同样重要的是，确保它在您想要瞄准的每种设备类型/尺寸上看起来都很好并且运行正常。显然，我们不拥有成千上万个安卓设备中的任何一个。这就是模拟器的用武之地。

然而，仿真器有时有点慢和笨重，尽管它们最近已经改进了很多。如果你想让你的用户获得真实的体验，那么你就必须部署到真正的设备上。因此，在开发应用程序时，我们希望同时使用真实设备和仿真器。

小费

如果您计划很快再次使用模拟器，那么让它保持运行，以避免不得不等待它再次启动。

如果你想在平板电脑上试用你的应用，你需要一个不同的模拟器。

创建新的模拟器

如果你想为不同的安卓设备创建一个模拟器，这很简单。从主菜单中，选择**工具** | **自动驾驶仪管理器**。在 AVD 管理器窗口中，左键单击**创建虚拟设备**。现在，左击想要创建的设备类型，**电视**、**手机**、**穿戴 OS** 或**平板**。现在，只需左键单击**下一步**并按照说明创建您的新 AVD。下次运行应用程序时，新的 AVD 将作为运行应用程序的选项出现。我们将在下一章逐步创建一个新的平板电脑模拟器。

现在我们可以看看如何将我们的应用程序放到一个真实的设备上。

## 在真实设备上运行应用

首先要做的是访问您的设备制造商的网站，获取并安装您的设备和操作系统所需的任何驱动程序。

注意

大多数新设备不需要驱动程序。因此，您可能想先尝试以下步骤。

接下来的几个步骤将设置安卓设备进行调试。请注意，不同的制造商对菜单选项的结构略有不同。但是，对于在大多数设备上启用调试来说，以下顺序可能非常接近(如果不是完全相同的话):

1.  点击手机/平板电脑上的**设置**菜单选项或**设置**应用程序。
2.  This next step will vary slightly for different versions of Android. The **Developer options** menu is hidden away so as not to trouble regular users. You must perform a slightly odd task to unlock the menu option. Tap the **About device** or **About Phone** option. Find the **Build Number** option and repeatedly tap it until you get a message informing you that **You are now a developer!**.

    注意

    一些制造商有不同的和模糊的方法来实现这一步。如果这一步不起作用，请在网上搜索您的设备并“解锁开发者选项”

3.  回到**设置**菜单。
4.  点击**开发者选项**。
5.  点击 **USB 调试**的复选框。
6.  将安卓设备连接到电脑的 USB 端口。
7.  单击安卓工作室上的任何位置，让安卓工作室检测您的设备是否已连接。你现在应该找到一个**允许 USB 调试？**设备上的提示；点击**允许**。
8.  Click the play icon from the Android Studio toolbar, as shown in the next screenshot:

    ![Figure 1.14 – Play icon from the Android Studio toolbar ](image/Figure_1.14_B16773.jpg)

    图 1.14–安卓工作室工具栏中的播放图标

9.  出现提示时，单击**确定**在您选择的设备上运行应用程序。

我们现在准备学习一些 Java，并将我们自己的 Java 代码添加到 Hello World 项目中，这将在下一章中介绍。

# 常见问题

1.  So, is Android not really an operating system, just a virtual machine, and are all the phones and tablets really Linux machines?

    不，安卓设备的所有不同子系统，包括 Linux、ART 以及库和驱动程序，共同组成了安卓操作系统。

2.  I still don't understand all these technical terms, such as ART, object-oriented, APK, and so on. Should I re-read this chapter?

    不，那没有必要，因为我们只需要介绍这个行话，我们会随着书的进展重新回顾并澄清它。如果你理解了以下内容，你就可以进入 [*第二章*](02.html#_idTextAnchor043) *、第一联系人:Java、XML 和 UI 设计器*:

    我们将在 Android Point Studio 中编写 Java 代码并创建其他资源，在 JDK 的帮助下，它将把这些代码和资源转化为真正的 Android 应用程序。

# 总结

到目前为止，我们已经建立了我们的安卓开发环境，创建了一个新的安卓应用程序，并将我们的应用程序部署到模拟器和真实设备上。如果您仍然有未回答的问题(并且您可能比本章开始时有更多的问题)，不要担心，因为随着我们对安卓和 Java 世界的深入研究，事情会变得更加清晰。

随着章节的进展，你将建立一个非常全面的理解，了解一切是如何结合在一起的，然后成功将只是一个练习和深入挖掘安卓应用编程接口的问题。

在下一章中，我们将使用可视化设计器和原始的 XML 代码编辑用户界面，并编写我们的第一个 Java 方法，开始使用安卓应用编程接口为我们提供的一些方法。